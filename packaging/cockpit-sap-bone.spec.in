Name: cockpit-sap-bone
Version: %{VERSION}
Release: 1%{?dist}
Summary: Cockpit Module for SAP Business One Installation
Url:     https://github.com/SUSE/cockpit-sap-bone/
License: LGPL-2.1-or-later


Source0: https://github.com/SUSE/cockpit-sap-bone/releases/download/%{version}/%{name}-%{version}.tar.xz

BuildArch: noarch
BuildRequires: nodejs >= 18
BuildRequires: make
BuildRequires: appstream-glib
BuildRequires: gettext

PreReq: cockpit-bridge

%{NPM_PROVIDES}

%description
Cockpit Module for SAP Business One Installation on SUSE Linux Enterprise Server

%prep
%autosetup -n %{name}

%build
NODE_ENV=production make

%install
%make_install PREFIX=/usr

# drop source maps, they are large and just for debugging
find %{buildroot}%{_datadir}/cockpit/ -name '*.map' | xargs --no-run-if-empty rm --verbose
%fdupes

%check
appstream-util validate-relax --nonet %{buildroot}/%{_datadir}/metainfo/*

%files
%doc README.md
%license LICENSE dist/index.js.LEGAL.txt
%dir %{_datadir}/cockpit/
%{_datadir}/cockpit/*
%{_datadir}/metainfo/*

%changelog
